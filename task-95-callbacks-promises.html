<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style type="text/css" media="all">
        .circle {
            transition-property: width, height;
            transition-duration: 2s;
            position: fixed;
            transform: translateX(-50%) translateY(-50%);
            background-color: red;
            border-radius: 50%;
            width: 200px;
            height: 200px;
            top: 150px;
            left: 150px;
        }
        .message-ball {
            font-family: serif;
            justify-content: center; /* center the text horizontally */
            align-items: center; /* center the text vertically */
            text-align: center; /* align the text within the element */
            display: flex; /* use flexbox to center the text */
        
        }
    </style>
</head>
<body>
    
    <button>click me</button>
    <div class="circle"></div>
    
    <script type="text/javascript" charset="utf-8">
        //const div = document.querySelector('div');
        
    
        function showCircle(cx, cy, radius) {
            
            return new Promise(resolve => {
                const div = document.body.children[1];
        div.style.width = '1px';
        div.style.height = '1px';
        div.textContent = '';
            let rgb = 'rgb(0,0,0)'
                div.style.width = '1px';
                div.style.height = '1px';
                div.style.top = cy + 'px';
                div.style.left = cx + 'px';
                period = 5;
                for (let i = 0; i <= radius; i ++) {
                    setTimeout(() =>(div.style.width = i + 'px'), period);
                    setTimeout(() =>(div.style.height = i + 'px'), period);
                };
                resolve(div);
                /*setTimeout(() => callback(div), period * radius * 5);*/
                const divBlack = div.cloneNode(true);
                setTimeout(() => {
                    for (let i = radius; i >= 1; i --) {
                        function changeColor(color,val) {
                            let arr = color.split('');
                            arr[4] = val;
                            return arr.join('');
                        }
                        //console.log(changeColor(rgb, 100));
                        divBlack.classList.add("circle");
                        divBlack.style.background = "black";
                        setTimeout(() => (div.style.width = i + 'px', div.style.color = changeColor(rgb, i * 2)), period);
                        setTimeout(() =>(div.style.height = i + 'px'), period);
                    }
                }, period * radius * 7)
            })
        }
        
        const button = document.querySelector('button');
        const div = document.querySelector('div');
        button.addEventListener('click', function() {
                showCircle(150, 150, 100).then(div => {
                    div.classList.add('message-ball');
                    div.append("Привіт, світ!");
                })
            }
        );
        
    </script>
</body>
</html>